const mysql=require("mysql"),connection=mysql.createConnection({host:"localhost",user:"root",password:"root",dateStrings:"date",database:"study"});connection.connect();const getList=(req,res)=>{connection.query("SELECT no,title,regdate,msg,name As member FROM bbs left join user On bbs.member = user.idx",(function(err,rows,fields){if(err)throw err;res.send(rows),console.log(rows)}))},delBody=(req,res)=>{const id=req.body.no;connection.query("delete from study.bbs where no=?",[id],(function(err,rows,fields){if(err)throw err;res.send(rows)}))},postInsert=(req,res)=>{console.log("post");const{title:title,member:member,msg:msg}=req.body;console.log(req.body),connection.query("insert into study.bbs (title,member,msg) value(?,?,?)",[title,member,msg],(function(err,rows,fields){if(err)throw err;console.log(rows),connection.query("select * from study.bbs order by no desc limit 1 ",(function(err,rows,fields){if(err)throw err;console.log(rows[0]),res.send(rows[0])}))}))},modiPatch=(req,res)=>{const{no:no,title:title,msg:msg}=req.body;console.log(req.body),connection.query("update study.bbs set title=?,msg=? where no=? ",[title,msg,no],(function(err,rows,fields){if(err)throw err;console.log(rows),res.send(rows)}))};module.exports={getList:getList,delBody:delBody,postInsert:postInsert,modiPatch:modiPatch};