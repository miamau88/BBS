const db=require("./../../db.inc");is_Object=function(a){return!!a&&a.constructor===Object},exports.getList=(req,res)=>{db.query("SELECT no,title,regdate,msg,name As member FROM bbs left join user On bbs.member = user.idx",(function(err,rows,fields){if(err)throw err;res.send(rows),console.log(rows)}))},exports.delBody=(req,res)=>{const id=req.body.no;db.query("delete from study.bbs where no=?",[id],(function(err,rows,fields){if(err)throw err;res.send(rows)}))},exports.postInsert=(req,res)=>{console.log("post");const{title:title,member:member,msg:msg}=req.body;console.log(req.body),db.query("insert into study.bbs (title,member,msg) value(?,?,?)",[title,member,msg],(function(err,rows,fields){if(err)throw err;console.log(rows),db.query("select * from study.bbs order by no desc limit 1 ",(function(err,rows,fields){if(err)throw err;console.log(rows[0]),res.send(rows[0])}))}))},exports.modiPatch=(req,res)=>{is_Object(req),console.log(is_Object);const{no:no,title:title,msg:msg}=req.body;console.log(req.body);const query="update study.bbs set title=?,msg=? where no=? ",param=[title,msg,no];db.query(query,param,(function(err,rows,fields){if(err)throw err;console.log(rows),res.send(rows)}))};