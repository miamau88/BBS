let bbs=[];fetch("http://localhost:5000/bbs").then(res=>res.json()).then(res=>{bbs=res,list()});const list=()=>{const ul=document.querySelector("ul"),bbsMap=bbslist=>(console.log(bbs),`<li data-id='${bbslist.no}'> \n        <div class=num>${bbslist.no}</div>\n        <div class=title>${bbslist.title}</div>\n        <div class=date>${bbslist.regdate}</div>\n        <div class=member>${bbslist.member} <button class="btndel"> 삭제</button></div>\n        </li> `);ul.innerHTML=bbs.map(bbsMap).join("");const btnDel=document.querySelectorAll(".btndel");for(let i=0;i<btnDel.length;i++)btnDel[i].addEventListener("click",e=>{const id=e.target.parentNode.parentNode.dataset.id;console.log(id),fetch("http://localhost:5000/bbs",{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({no:id})}).then(()=>{bbs.splice(i,1),e.target.parentNode.parentNode.remove(),console.log(bbs)}).catch(err=>alert(err))})},modal=document.querySelector(".modal"),btnOpenPopup=document.querySelector(".modalOpen"),modalClose=document.querySelector(".modal-closeX");function block(){modal.style.display="block"}function none(){modal.style.display="none"}btnOpenPopup.addEventListener("click",block),modalClose.addEventListener("click",none);const writeBtn=document.querySelector(".writeBtn"),input=document.querySelector("input");writeBtn.addEventListener("click",()=>{let no=0!==bbs.length?Number(bbs[bbs.length-1].no)+1:1,date=0,member="test9";fetch("http://localhost:5000/bbs",{method:"POST",headers:{"Content-Type":"applicaton/json;charset=utf-8"},body:JSON.stringify({no:no,title:input.value,date:0,member:"test4123412"})}).then(()=>{bbs.push({no:no,title:input.value,date:0,member:member}),list()}).catch(err=>alert(err)),console.log(bbs)});